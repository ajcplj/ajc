NAME		= test

SRC_DIR		= src
OBJ_DIR		= obj
INC_DIR		= inc
LIB_DIR		= lib
BIN_DIR		= bin

SRC		= Test.cpp	\
		  Test2.cpp	\
		  main.cpp

OBJ		= $(addprefix $(OBJ_DIR)/, $(SRC:.cpp=.o))

CPP		= g++

CPPFLAGS	+= -W -Wall -Wextra
CPPFLAGS	+= -I $(INC_DIR)

LDFLAGS		+= -L $(LIB_DIR)

RM		= rm -rfv

DEFAULT		= \033[0;0m
GREY1		= \033[0;30m
GREY2		= \033[1;30m
RED1		= \033[0;31m
RED2		= \033[1;31m
GREEN		= \033[0;32m
GREEN2		= \033[1;32m
YELLOW		= \033[0;33m
YELLOW2		= \033[1;33m
BLUE1		= \033[0;34m
BLUE2		= \033[1;34m
BLUE3		= \033[0;35m
BLUE4		= \033[1;35m


all: $(BIN_DIR)/$(NAME)

$(BIN_DIR)/$(NAME):	$(OBJ) start_compilation end_compilation
	@echo "$(GREY1)============================================================================================ STARTING OBJECTS LINKING =============================================================================================$(YELLOW)"
	@echo "Linking $(OBJ)"
#	$(CPP) $(CPPFLAGS) $(LDFLAGS) $(OBJ) -o $@
	@echo "$(YELLOW2)================================================================================================== LINKING DONE ===================================================================================================$(DEFAULT)"

$(OBJ_DIR)/%.o:		$(SRC_DIR)/%.cpp
	@echo "$(BLUE1)Building $@ $(DEFAULT)"
	@$(CPP) $(CPPFLAGS) -c -o $@ $<


start_compilation:
	@echo "$(GREY1)========================================================================================== STARTING SOURCES COMPILATION ===========================================================================================$(DEFAULT)"
end_compilation:
	@echo "$(BLUE2)================================================================================================ COMPILATION DONE =================================================================================================$(DEFAULT)"

clean:
	@echo "$(GREY1)========================================================================================= CLEANING COMPILATION REPERTORY ==========================================================================================$(RED1)"
	@$(RM) *~ .*~ *# .#*
	@(cd $(SRC_DIR) && $(RM) *~ .*~ *# .#* && cd ..)
	@(cd $(INC_DIR) && $(RM) *~ .*~ *# .#* && cd ..)
	@(cd $(BIN_DIR) && $(RM) *~ .*~ *# .#* && cd ..)
	@(cd $(LIB_DIR) && $(RM) *~ .*~ *# .#* && cd ..)
	@(cd $(OBJ_DIR) && $(RM) *~ .*~ *# .#* *.o && cd ..)
	@echo "$(RED2)========================================================================================= COMPILATION REPERTORY CLEANED ===========================================================================================$(DEFAULT)"

fclean:		clean
	@echo "$(GREY1)=============================================================================================== CLEANING BINARIES =================================================================================================$(RED1)"
	@$(RM) $(BIN_DIR)/$(NAME)
	@echo "$(RED2)================================================================================================ BINARIES CLEANED =================================================================================================$(DEFAULT)"

re:		fclean all

.PHONY:	all clean fclean re
